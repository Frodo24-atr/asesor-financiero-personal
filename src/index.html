<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>💰 Asesor Financiero Personal</title>
    <meta name="description" content="Herramienta inteligente para gestión financiera personal con análisis de ingresos y recomendaciones automáticas">
    
    <!-- Estilos -->
    <link rel="stylesheet" href="./styles/main.scss">
    
    <!-- Scripts externos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <h1>💰 Asesor Financiero Personal</h1>
                    <p>Tu compañero inteligente para la gestión financiera</p>
                </div>
                <div class="header-actions">
                    <button class="btn btn-outline" id="toggle-theme">
                        <span class="theme-icon">🌙</span>
                    </button>
                    <button class="btn btn-primary" id="export-report">
                        📄 Exportar Reporte
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="navigation">
        <div class="container">
            <div class="nav-tabs">
                <button class="nav-tab active" data-tab="dashboard">📊 Dashboard</button>
                <button class="nav-tab" data-tab="income">💰 Ingresos</button>
                <button class="nav-tab" data-tab="expenses">💸 Gastos</button>
                <button class="nav-tab" data-tab="analysis">📈 Análisis</button>
                <button class="nav-tab" data-tab="goals">🎯 Metas</button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <div class="container">
            
            <!-- Dashboard Tab -->
            <section id="dashboard-tab" class="tab-content active">
                <div class="dashboard-header">
                    <h2>Dashboard Financiero</h2>
                    <div class="financial-health-indicator" id="health-indicator">
                        <div class="health-status">
                            <span class="health-icon">🟢</span>
                            <span class="health-text">Estado: No evaluado</span>
                        </div>
                        <div class="health-score">
                            <span class="score-label">Puntuación:</span>
                            <span class="score-value" id="health-score">--</span>
                        </div>
                    </div>
                </div>

                <!-- Cards de Resumen -->
                <div class="summary-cards">
                    <div class="card income-card">
                        <div class="card-header">
                            <h3>💰 Ingresos Mensuales</h3>
                        </div>
                        <div class="card-content">
                            <div class="amount" id="total-income">$0</div>
                            <div class="subtitle" id="income-subtitle">No configurado</div>
                        </div>
                    </div>

                    <div class="card expense-card">
                        <div class="card-header">
                            <h3>💸 Gastos Mensuales</h3>
                        </div>
                        <div class="card-content">
                            <div class="amount" id="total-expenses">$0</div>
                            <div class="subtitle" id="expenses-subtitle">0 gastos registrados</div>
                        </div>
                    </div>

                    <div class="card balance-card">
                        <div class="card-header">
                            <h3>💵 Ingreso Disponible</h3>
                        </div>
                        <div class="card-content">
                            <div class="amount" id="disposable-income">$0</div>
                            <div class="subtitle" id="balance-subtitle">No evaluado</div>
                        </div>
                    </div>

                    <div class="card ratio-card">
                        <div class="card-header">
                            <h3>📊 Ratio de Endeudamiento</h3>
                        </div>
                        <div class="card-content">
                            <div class="amount" id="debt-ratio">0%</div>
                            <div class="subtitle" id="ratio-subtitle">Excelente</div>
                        </div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="charts-section">
                    <div class="chart-container">
                        <h3>📈 Distribución de Gastos</h3>
                        <canvas id="expenses-chart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>📊 Tendencia Mensual</h3>
                        <canvas id="trend-chart"></canvas>
                    </div>
                </div>
            </section>

            <!-- Income Tab -->
            <section id="income-tab" class="tab-content">
                <div class="section-header">
                    <h2>💰 Configuración de Ingresos</h2>
                    <p>Define tus fuentes de ingresos para un análisis financiero preciso</p>
                </div>

                <!-- Configuración Principal de Ingresos -->
                <div class="income-config-card">
                    <div class="card-header">
                        <h3>Ingreso Principal</h3>
                    </div>
                    <div class="card-content">
                        <form id="income-form" class="income-form">
                            <!-- Tipo de Frecuencia -->
                            <div class="form-group">
                                <label class="form-label">Frecuencia de Pago</label>
                                <div class="frequency-selector">
                                    <label class="frequency-option">
                                        <input type="radio" name="income-frequency" value="monthly" checked>
                                        <span class="frequency-label">📅 Mensual</span>
                                    </label>
                                    <label class="frequency-option">
                                        <input type="radio" name="income-frequency" value="biweekly">
                                        <span class="frequency-label">📋 Quincenal</span>
                                    </label>
                                </div>
                            </div>

                            <!-- Monto -->
                            <div class="form-group">
                                <label for="income-amount" class="form-label">
                                    Monto <span id="income-frequency-label">(Mensual)</span>
                                </label>
                                <div class="input-group">
                                    <span class="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        id="income-amount" 
                                        name="income-amount"
                                        class="form-input"
                                        placeholder="2,500,000"
                                        min="0"
                                        step="1000"
                                    >
                                </div>
                            </div>

                            <!-- Ingresos Adicionales -->
                            <div class="form-group">
                                <label for="additional-income" class="form-label">
                                    Ingresos Adicionales (Opcional)
                                </label>
                                <div class="input-group">
                                    <span class="input-prefix">$</span>
                                    <input 
                                        type="number" 
                                        id="additional-income" 
                                        name="additional-income"
                                        class="form-input"
                                        placeholder="500,000"
                                        min="0"
                                        step="1000"
                                    >
                                </div>
                                <small class="form-help">Freelance, inversiones, bonos, etc.</small>
                            </div>

                            <!-- Bonificaciones -->
                            <div class="form-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="include-bonuses" name="include-bonuses">
                                    <span class="checkmark"></span>
                                    Incluir bonificaciones estacionales
                                </label>
                                <small class="form-help">Prima, cesantías, bonos de productividad</small>
                            </div>

                            <!-- Botones -->
                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    💾 Guardar Configuración
                                </button>
                                <button type="button" class="btn btn-outline" id="preview-income">
                                    👁️ Vista Previa
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Resumen de Ingresos Configurados -->
                <div class="income-summary" id="income-summary" style="display: none;">
                    <div class="card">
                        <div class="card-header">
                            <h3>📋 Resumen de Ingresos</h3>
                        </div>
                        <div class="card-content">
                            <div class="income-breakdown" id="income-breakdown">
                                <!-- Se llenará dinámicamente -->
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Expenses Tab -->
            <section id="expenses-tab" class="tab-content">
                <div class="section-header">
                    <h2>💸 Gestión de Gastos</h2>
                    <p>Registra y categoriza tus gastos para un control detallado</p>
                </div>

                <!-- Formulario de Gastos -->
                <div class="expense-form-card">
                    <div class="card-header">
                        <h3>Agregar Nuevo Gasto</h3>
                    </div>
                    <div class="card-content">
                        <form id="expense-form" class="expense-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expense-name" class="form-label">Nombre del Gasto</label>
                                    <input 
                                        type="text" 
                                        id="expense-name" 
                                        name="expense-name"
                                        class="form-input"
                                        placeholder="Ejemplo: Arriendo, Supermercado, Gasolina"
                                        required
                                    >
                                </div>
                                
                                <div class="form-group">
                                    <label for="expense-category" class="form-label">Categoría</label>
                                    <select id="expense-category" name="expense-category" class="form-select" required>
                                        <option value="">Seleccionar categoría</option>
                                        <option value="housing">🏠 Vivienda</option>
                                        <option value="food">🍕 Alimentación</option>
                                        <option value="transport">🚗 Transporte</option>
                                        <option value="health">🏥 Salud</option>
                                        <option value="education">📚 Educación</option>
                                        <option value="entertainment">🎬 Entretenimiento</option>
                                        <option value="shopping">🛍️ Compras</option>
                                        <option value="services">⚡ Servicios</option>
                                        <option value="savings">💰 Ahorros</option>
                                        <option value="debt">💳 Deudas</option>
                                        <option value="other">📦 Otros</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-row">
                                <div class="form-group">
                                    <label for="expense-amount" class="form-label">Monto</label>
                                    <div class="input-group">
                                        <span class="input-prefix">$</span>
                                        <input 
                                            type="number" 
                                            id="expense-amount" 
                                            name="expense-amount"
                                            class="form-input"
                                            placeholder="150,000"
                                            min="0"
                                            step="1000"
                                            required
                                        >
                                    </div>
                                </div>

                                <div class="form-group">
                                    <label for="expense-frequency" class="form-label">Frecuencia</label>
                                    <select id="expense-frequency" name="expense-frequency" class="form-select" required>
                                        <option value="monthly">📅 Mensual</option>
                                        <option value="biweekly">📋 Quincenal</option>
                                        <option value="weekly">📄 Semanal</option>
                                        <option value="daily">📝 Diario</option>
                                        <option value="yearly">📊 Anual</option>
                                        <option value="one-time">🎯 Una vez</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="expense-priority" class="form-label">Prioridad</label>
                                <div class="priority-selector">
                                    <label class="priority-option essential">
                                        <input type="radio" name="expense-priority" value="essential" checked>
                                        <span class="priority-label">🔴 Esencial</span>
                                    </label>
                                    <label class="priority-option important">
                                        <input type="radio" name="expense-priority" value="important">
                                        <span class="priority-label">🟡 Importante</span>
                                    </label>
                                    <label class="priority-option optional">
                                        <input type="radio" name="expense-priority" value="optional">
                                        <span class="priority-label">🟢 Opcional</span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-actions">
                                <button type="submit" class="btn btn-primary">
                                    ➕ Agregar Gasto
                                </button>
                                <button type="reset" class="btn btn-outline">
                                    🔄 Limpiar
                                </button>
                            </div>
                        </form>
                    </div>
                </div>

                <!-- Lista de Gastos -->
                <div class="expenses-list" id="expenses-list">
                    <div class="card">
                        <div class="card-header">
                            <h3>📋 Lista de Gastos</h3>
                            <div class="list-filters">
                                <select id="category-filter" class="form-select-sm">
                                    <option value="">Todas las categorías</option>
                                </select>
                                <select id="priority-filter" class="form-select-sm">
                                    <option value="">Todas las prioridades</option>
                                    <option value="essential">🔴 Esenciales</option>
                                    <option value="important">🟡 Importantes</option>
                                    <option value="optional">🟢 Opcionales</option>
                                </select>
                            </div>
                        </div>
                        <div class="card-content">
                            <div class="expenses-container" id="expenses-container">
                                <div class="empty-state">
                                    <div class="empty-icon">📊</div>
                                    <h3>No hay gastos registrados</h3>
                                    <p>Comienza agregando tus gastos para obtener un análisis detallado</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Analysis Tab -->
            <section id="analysis-tab" class="tab-content">
                <div class="section-header">
                    <h2>📈 Análisis Financiero</h2>
                    <p>Análisis detallado de tu situación financiera con recomendaciones personalizadas</p>
                </div>

                <div class="analysis-placeholder">
                    <div class="card">
                        <div class="card-content text-center">
                            <div class="placeholder-icon">🚧</div>
                            <h3>Análisis Avanzado</h3>
                            <p>Esta sección se desarrollará en las próximas fases del proyecto</p>
                            <p>Incluirá ratios financieros, proyecciones y recomendaciones inteligentes</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Goals Tab -->
            <section id="goals-tab" class="tab-content">
                <div class="section-header">
                    <h2>🎯 Metas Financieras</h2>
                    <p>Define y rastrea tus objetivos financieros</p>
                </div>

                <div class="goals-placeholder">
                    <div class="card">
                        <div class="card-content text-center">
                            <div class="placeholder-icon">🎯</div>
                            <h3>Metas y Objetivos</h3>
                            <p>Sistema de metas financieras en desarrollo</p>
                            <p>Podrás establecer metas de ahorro, eliminar deudas y planificar inversiones</p>
                        </div>
                    </div>
                </div>
            </section>

        </div>
    </main>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <p>&copy; 2025 Asesor Financiero Personal. Evolución de Calculadora de Cuotas.</p>
                    <p>Herramienta de código abierto para gestión financiera inteligente</p>
                </div>
                <div class="footer-links">
                    <a href="https://github.com/tuusuario/calculadora-cuotas" target="_blank">
                        📊 Calculadora Original
                    </a>
                    <a href="https://github.com/tuusuario/asesor-financiero-personal" target="_blank">
                        🏦 Proyecto Actual
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loading-overlay">
        <div class="loading-spinner"></div>
        <p>Procesando información financiera...</p>
    </div>

    <!-- Modal Container -->
    <div class="modal-overlay" id="modal-overlay">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-title">Título</h3>
                <button class="modal-close" id="modal-close">&times;</button>
            </div>
            <div class="modal-content" id="modal-content">
                <!-- Contenido dinámico -->
            </div>
            <div class="modal-actions" id="modal-actions">
                <!-- Botones dinámicos -->
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script type="module" src="./scripts/app.ts"></script>
</body>
</html>
